{"file":"bs-base-modal.bs-container.entry.js","mappings":"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","names":[],"sources":["./src/utils/getActiveElement.ts","./src/components/organisms/base-modal/base-modal.scss?tag=bs-base-modal&encapsulation=shadow","./src/components/organisms/base-modal/base-modal.tsx","./src/components/molecules/container/container.scss?tag=bs-container","./src/components/molecules/container/container.tsx"],"sourcesContent":["/**\n * https://www.abeautifulsite.net/posts/finding-the-active-element-in-a-shadow-root/\n *\n * You can get the focused element with document.activeElement but,\n * if it's inside a shadow root, this will be the host element.\n *\n * Here's a recursive function that will return the internal element that has focus,\n * even if it's inside a shadow root.\n *\n */\n\nimport { isEmpty } from '@springbokagency/stencil-base';\n\nexport function getActiveElement(root: Document | ShadowRoot = document): Element | null {\n  const activeEl = root.activeElement;\n\n  if (isEmpty(activeEl)) {\n    return null;\n  }\n\n  if (!isEmpty(activeEl.shadowRoot)) {\n    return getActiveElement(activeEl.shadowRoot);\n  }\n\n  return activeEl;\n}\n",":host {\n  @include reset-host;\n  height: 100%;\n}\n\n:host(.has-scale-transition) {\n  animation: modal-scale-open 0.6s $cubic-bezier;\n}\n\n:host(.has-scale-transition.is-closing) {\n  animation: modal-scale-close 0.6s $cubic-bezier;\n}\n\n:host(.has-fade-transition) {\n  animation: modal-fade-open 0.6s $cubic-bezier;\n}\n\n:host(.has-fade-transition.is-closing) {\n  animation: modal-fade-close 0.6s $cubic-bezier;\n}\n\n@keyframes modal-scale-open {\n  from {\n    opacity: 0;\n    transform: scale(1.05);\n  }\n\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n\n@keyframes modal-scale-close {\n  from {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  to {\n    opacity: 0;\n    transform: scale(1.05);\n  }\n}\n\n@keyframes modal-fade-open {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes modal-fade-close {\n  from {\n    opacity: 1;\n  }\n\n  to {\n    opacity: 0;\n  }\n}\n","/* eslint-disable @stencil-community/required-jsdoc */\n\nimport { Component, Host, h, Element, Method, Prop, Event, EventEmitter } from '@stencil/core';\nimport { isEmpty } from '@springbokagency/stencil-base';\n\nimport { getActiveElement } from '../../../utils/getActiveElement';\nimport type { BaseModalId, TransitionType } from './base-modal.types';\nimport { deepQuerySelectorAll } from '../../../utils/deepQuerySelectorAll';\n\n/**\n * Component containing all the modals \"focus trap\" logic\n * This is a way to get around StencilJS not allowing class inheritance\n *\n * Each modal that requires focus trap functionality\n * needs to be nested inside this base component\n */\n@Component({\n  tag: 'bs-base-modal',\n  styleUrl: 'base-modal.scss',\n  shadow: true,\n})\nexport class BsBaseModal {\n  private previousFocusedElement: Element;\n\n  private focusableElements: Element[] | [];\n\n  private firstFocusableElement: Element;\n\n  private lastFocusableElement: Element;\n\n  @Element() el!: HTMLBsBaseModalElement;\n\n  /**\n   * Props\n   */\n\n  @Prop() modalId: BaseModalId;\n\n  @Prop() transitionType?: TransitionType = 'fade';\n\n  @Prop() modalCanBeClosed?: boolean = true; // usefull with nested modals\n\n  /**\n   * Events\n   */\n\n  @Event() bsModalIsClosing: EventEmitter<{ modalId: BaseModalId }>;\n\n  @Event() bsModalIsClosed: EventEmitter<{ modalId: BaseModalId }>;\n\n  @Event() bsNextSlideAction: EventEmitter;\n\n  @Event() bsPreviousSlideAction: EventEmitter;\n\n  /**\n   * Methods\n   */\n\n  @Method()\n  async close() {\n    if (!this.modalCanBeClosed) return;\n\n    this.bsModalIsClosing.emit({ modalId: this.modalId });\n\n    // animate modal closing\n    this.el.classList.add('is-closing');\n\n    // enable website scroll\n    document.documentElement.classList.remove('modal-is-open');\n\n    // when transition is finished, remove modal\n    this.el.addEventListener('animationend', () => {\n      this.bsModalIsClosed.emit({ modalId: this.modalId });\n    });\n  }\n\n  @Method()\n  async nextSlide() {\n    this.bsNextSlideAction.emit();\n  }\n\n  @Method()\n  async previousSlide() {\n    this.bsPreviousSlideAction.emit();\n  }\n\n  @Method()\n  async handleFocus() {\n    // focus trap\n    this.focusableElements = deepQuerySelectorAll(\n      'button:not([disabled]), a:not([disabled]), input:not([disabled]), [tabindex]:not([tabindex=\"-1\"]',\n      this.el.firstElementChild\n    );\n\n    [this.firstFocusableElement] = this.focusableElements;\n    this.lastFocusableElement = this.focusableElements[this.focusableElements.length - 1];\n\n    // focus modal's first element\n    (this.firstFocusableElement as HTMLElement)?.focus({ preventScroll: true });\n  }\n\n  private handleKeyPress(e: KeyboardEvent) {\n    // handle focus trap on \"Tab\" key press\n    if (e.key === 'Tab') this.handleFocusTrap(e);\n\n    // close modal on \"ESC\" key press\n    if (e.key === 'Escape') this.close();\n  }\n\n  private handleFocusTrap(e: KeyboardEvent) {\n    const shiftKeyIsPressed = e.shiftKey;\n\n    if (shiftKeyIsPressed) {\n      if (getActiveElement() === this.firstFocusableElement) {\n        // add focus for the last focusable element\n        (this.lastFocusableElement as HTMLElement).focus({ preventScroll: true });\n        e.preventDefault();\n      }\n    } else if (getActiveElement() === this.lastFocusableElement) {\n      // add focus for the last focusable element\n      (this.firstFocusableElement as HTMLElement).focus({ preventScroll: true });\n      e.preventDefault();\n    }\n  }\n\n  /**\n   * Lifecycle Hooks\n   */\n\n  componentDidLoad() {\n    document.addEventListener('keydown', this.handleKeyPress.bind(this));\n\n    // disable website scroll\n    document.documentElement.classList.add('modal-is-open');\n\n    this.handleFocus();\n\n    // save last page focused element (before modal opening)\n    this.previousFocusedElement = getActiveElement();\n  }\n\n  disconnectedCallback() {\n    document.removeEventListener('keydown', this.handleKeyPress.bind(this));\n\n    // re-focus last main-content's focused element (before modal opening)\n    (this.previousFocusedElement as HTMLElement)?.focus();\n  }\n\n  render() {\n    return (\n      <Host\n        class={`${!isEmpty(this.transitionType) ? `has-${this.transitionType}-transition` : ''}`}\n      >\n        <slot />\n      </Host>\n    );\n  }\n}\n",".bs-container {\n  display: block;\n  gap: rem(12);\n  width: 100%;\n  max-width: rem(3840);\n  margin-right: auto !important;\n  margin-left: auto !important;\n\n  @include mq('min', 'lg') {\n    gap: rem(24);\n  }\n\n  &.is-contained {\n    @include container-middle-view;\n  }\n\n  &.is-mobile-full-width {\n    column-gap: 0;\n\n    @include mq('max', 'lg') {\n      max-width: unset;\n    }\n  }\n}\n","import { Component, Host, Prop, h } from '@stencil/core';\n\n/**\n * The container component.\n */\n@Component({\n  tag: 'bs-container',\n  styleUrl: 'container.scss',\n  shadow: false,\n})\nexport class BsContainer {\n  /** Props */\n  /**\n   * Should the content be centered with a max width on mobile?\n   */\n  @Prop() mobileFullWidth?: boolean = false;\n\n  /**\n   * Should the content be centered with a max width on desktop?\n   */\n  @Prop() contained?: boolean = false;\n\n  render() {\n    return (\n      <Host\n        class={`bs-container ${this.mobileFullWidth ? 'is-mobile-full-width' : ''} ${\n          this.contained ? 'is-contained' : ''\n        }`}\n      >\n        <slot />\n      </Host>\n    );\n  }\n}\n"],"version":3}